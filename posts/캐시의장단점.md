---
title: 캐시는 무엇인가?
description: 캐시의 장단점과 활용방법
date: "2023-03-29"
category: javascript
published: true
tags: ["cache"]
---

# 캐시란 무엇인가?

## 캐시(Cache) 정의

_자주 사용하는 데이터나 리소스를 미리 복사해 놓는 임시 장소_ </br>

웹 프로그래밍에서 캐시는 네트워크나 서버의 부하를 줄이고, 성능을 향상시키는 데 사용된다.

## 캐시의 장점

- #1. 성능 향상 : 캐시된 데이터가 리소스를 불러오면, 네트워크나 서버에서 직접 가져오는 것보다 훨씬 빠르게 처리된다. 이를 통해 웹 애플리케이션의 로딩 속도를 향상시킬 수 있다.

- #2. 네트워크 부하 감소 : 캐시된 데이터나 리소스를 사용하면, 서버나 네트워크에 대한 요청 횟수가 줄어든다. 따라서 서버의 부하를 줄이고, 대역폭 사용량을 절약할 수 있다.

- #3. 사용자 경험 개선 : 사용자가 매번 다시 다운로드 할 필요가 없으므로 사용자 경험을 개선할 수 있다.

## 캐시의 단점

- #1. 데이터 일치성 문제 : 캐시된 데이터는 최신 데이터가 아닐 수 있다. 이를 방지하기 위해 적절한 캐시 제어 기법을 사용해야 한다.

- #2. 캐시 메모리 한계 : 캐시 메모리에 저장될 수 있는 데이터나 리소스는 한계가 있다.

- #3. 보안 문제 : 캐시된 데이터나 리소스가 공유될 경우 보안 문제가 발생할 수 있다. 따라서 민감한 정보는 캐시에 저장되지 않도록 하는것이 좋다.

- #4. 캐시 무효화 문제 : 캐시는 일정 기간동안 유효하게 사용된다. 하지만 데이터나 리소스가 업데이트되거나 삭제되면 캐시된 데이터나 리소스는 무효화 되어야 한다. 이를 처리하기 위해 적절한 캐시 제어 기법이 필요하다.

## 프론트엔드에서 캐시 활용 예시

### 이미지 캐싱

웹 페이지에서 이미지는 자주 사용되는 리소스 중 하나로, 이미지 캐싱을 사용하면 이미지를 서버에 재요청 할 필요가 없다. 브라우저는 이미지를 한번 로드하면 이미지를 캐시해둔다. </br>

- 간단한 예시로 Image객체를 활용하여 이미지가 로드되기 전 해당 이미지를 안보여 주다가 이미지가 다운로드되면 표시하고 다음번 또 불리면 같은 url의 이미지를 브라우저 캐시에서 가져와 보여주게 할 수 있다.

```javascript
import { useState, useEffect } from "react";

function ImageComponent({ src, alt }) {
  const [loaded, setLoaded] = useState(false);

  useEffect(() => {
    const img = new Image();
    img.onload = () => {
      setLoaded(true);
    };
    img.src = src;
  }, [src]);

  return loaded ? <img src={src} alt={alt} /> : null;
}
```

위 코드는 캐싱측면으로만 생각하면 그냥 `<img>`태그를 사용하는것과 차이가 없어 보이지만, 해당 이미지가 캐싱되어 있지 않을때, 다운로드 되기 전까지 null값을 넣어 화면을 빠르게 구성시켜줄 수 있다.

### 서버에서 동적으로 생성된 데이터 캐시

서버에서 동적으로 생성된 데이터를 캐시로 저장하여 다음번 요청을 빠르게 반환하는 것이다. 이를 위해 캐시 키를 정확하게 관리하고 일정 주기마다 캐시를 갱신하는 방법등을 고려해야 한다.

- 예시로 react-query를 사용하면 쿼리의 결과를 자동으로 캐싱하고 관리할 수 있도록 도와준다. 리액트 쿼리는 API요청을 추적하여 필요할 때만 요청을 보내고, 이전 결과를 재사용 하여 애플리케이션의 성능을 향상 시킨다.

## 프론트엔드에서 캐시를 직접 다루는 방법

HTTP 캐시 헤더를 이용하는것이 간단하다. 이 방법은 서버가 이미지나 페이지 등의 리소스를 반환할 때 HTTP응답 헤더를 이용하여 브라우저가 해당 리소스를 캐시할 수 있도록 지시하는 방법이다. </br>

```yaml
HTTP/1.1 200 OK
Date: Mon, 29 Mar 2023 02:27:15 GMT
Content-Type: image/jpeg
Content-Length: 12345
Cache-Control: max-age=3600

[이미지 바이너리 데이터]
```

위 예시에서 max-age=3600은 해당 이미지를 캐시할 수 있는 시간을 초 단위로 나타낸다.
